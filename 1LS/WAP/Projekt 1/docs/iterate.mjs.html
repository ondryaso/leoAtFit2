<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: iterate.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: iterate.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Provides an {@link iterateProperties} generator that yields names of properties
 * in a given object and its prototype chain.
 * @module iterate
 * @author Ondřej Ondryáš &lt;xondry02@stud.fit.vut.cz>
 */

'use strict';

/**
 * Returns a generator that yields names of properties in a given object and its prototype chain.
 * For properties identified by a {@link Symbol}, the string representation of the identifier is yielded.
 * 
 * If {@link filterDescriptor} is provided, its defined properties are used as filters that control
 * which properties are returned. Their values are matched against the corresponding values in each property
 * descriptor in the target object chain.
 * 
 * The generator doesn't guarantee any particular order of the returned properties.
 * In this implementation, the names are yielded in order of {@link Reflect.ownKeys}, starting with the provided
 * source object and going up its prototype chain.
 * 
 * @param {*} inObj The object to iterate properties of.
 * @param {PropertyDescriptor?} filterDescriptor A descriptor-like object that specify values to filter by.
 * Only the `configurable`, `enumerable`, `value` and `writable` properties are used as filters (if defined). 
 * Any other properties are ignored. If undefined or null, no filtering is performed.
 * @yields {string} The next property name.
 * @returns {Generator&lt;string, any, unknown>} A generator that yields string property names.
 * @example
 * // Returns an iterable of "a", "constructor", "__defineGetter__", etc.
 * // (all properties from Object.prototype are included as well)
 * iterateProperties({ a: "val" })
 * @example
 * // Returns an iterable of "a", "c"
 * iterateProperties({ a: "val", b: "val2", c: "val" }, { value: "val" })
 * @example
 * // Returns "a", "b"
 * iterateProperties({ a: undefined, b: null })
 * // Returns "a"
 * iterateProperties({ a: undefined, b: null }, { value: undefined })
 */
export function* iterateProperties(inObj, filterDescriptor = undefined) {
    let currentObj = inObj;

    while (currentObj !== null) {
        let keys = Reflect.ownKeys(currentObj);

        for (let key of keys) {
            if (filterDescriptor &amp;&amp; !matchesDescriptor(Object.getOwnPropertyDescriptor(currentObj, key),
                filterDescriptor))
                continue;

            yield key.toString();
        }

        currentObj = Object.getPrototypeOf(currentObj);
    }
}

/**
 * Determines whether a provided property descriptor matches a filter.
 * A descriptor matches a filter if values of all the defined fields of the filter equal
 * the values in the source descriptor. Undefined fields in the filter are ignored.
 * 
 * @param {PropertyDescriptor} target The property descriptor to match.
 * @param {PropertyDescriptor} filter The filter property descriptor to match against.
 */
function matchesDescriptor(target, filter) {
    // 'in' must be used here because we want to allow filtering by undefined _value_,
    // that is, filter = { value: undefined }
    if ('value' in filter &amp;&amp; target.value !== filter.value)
        return false;
    if ('configurable' in filter &amp;&amp; target.configurable !== filter.configurable)
        return false;
    if ('enumerable' in filter &amp;&amp; target.enumerable !== filter.enumerable)
        return false;
    if ('writable' in filter &amp;&amp; target.writable !== filter.writable)
        return false;

    return true;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-iterate.html">iterate</a></li><li><a href="module-iterate_alternative.html">iterate_alternative</a></li></ul><h3>Namespaces</h3><ul><li><a href="performanceTests.html">performanceTests</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Mar 01 2023 21:55:29 GMT+0100 (Středoevropský standardní čas)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
